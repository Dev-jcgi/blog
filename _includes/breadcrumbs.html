<!-- Breadcrumbs Component - Navigation Aid & SEO -->

{% if page.layout == 'post' or page.breadcrumbs %}
<nav aria-label="Breadcrumb" class="breadcrumbs" role="navigation">
  <div class="container">
    <ol class="breadcrumb-list" itemscope itemtype="https://schema.org/BreadcrumbList">
      <!-- Home -->
      <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="{{ site.baseurl }}/" itemprop="item" title="Ir a inicio">
          <svg class="breadcrumb-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span itemprop="name">Inicio</span>
        </a>
        <meta itemprop="position" content="1">
      </li>
      
      {% if page.layout == 'post' %}
        <!-- Category (if exists) -->
        {% if page.category %}
        <li class="breadcrumb-separator" aria-hidden="true">/</li>
        <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="{{ site.baseurl }}/categorias/#{{ page.category | slugify }}" itemprop="item" title="Ver posts en {{ page.category }}">
            <span itemprop="name">{{ page.category }}</span>
          </a>
          <meta itemprop="position" content="2">
        </li>
        {% endif %}
        
        <!-- Current Page -->
        <li class="breadcrumb-separator" aria-hidden="true">/</li>
        <li class="breadcrumb-item breadcrumb-current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
          <span itemprop="name">{{ page.title | truncate: 40 }}</span>
          <meta itemprop="item" content="{{ page.url | absolute_url }}">
          <meta itemprop="position" content="{% if page.category %}3{% else %}2{% endif %}">
        </li>
      {% elsif page.url != '/' %}
        <!-- Generic Pages -->
        <li class="breadcrumb-separator" aria-hidden="true">/</li>
        <li class="breadcrumb-item breadcrumb-current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
          <span itemprop="name">{{ page.title }}</span>
          <meta itemprop="item" content="{{ page.url | absolute_url }}">
          <meta itemprop="position" content="2">
        </li>
      {% endif %}
    </ol>
  </div>
</nav>
{% endif %}

<style>
/* Breadcrumbs Styles */
.breadcrumbs {
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid var(--border-color);
  padding: 0.75rem 0;
  font-size: 0.875rem;
  position: sticky;
  top: 70px; /* Below the header */
  z-index: 999;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.breadcrumb-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
}

.breadcrumb-item {
  display: inline-flex;
  align-items: center;
  color: var(--text-secondary);
}

.breadcrumb-item a {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  color: var(--text-secondary);
  text-decoration: none;
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  transition: all 0.2s ease;
}

.breadcrumb-item a:hover {
  color: var(--primary);
  background: rgba(0, 212, 255, 0.1);
}

.breadcrumb-item a:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

.breadcrumb-icon {
  flex-shrink: 0;
}

.breadcrumb-separator {
  color: var(--text-muted);
  user-select: none;
  opacity: 0.5;
}

.breadcrumb-current {
  color: var(--text-primary);
  font-weight: 500;
  padding: 0.25rem 0.5rem;
}

.breadcrumb-current span {
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Light Theme Adjustments */
[data-theme="light"] .breadcrumbs {
  background: rgba(255, 255, 255, 0.95);
  border-bottom-color: rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .breadcrumb-item a:hover {
  background: rgba(0, 212, 255, 0.15);
}

/* Responsive */
@media (max-width: 768px) {
  .breadcrumbs {
    font-size: 0.8125rem;
    padding: 0.5rem 0;
    top: 60px; /* Adjusted for smaller header */
    position: static; /* Remove sticky on mobile */
  }
  
  .breadcrumb-list {
    gap: 0.375rem;
  }
  
  .breadcrumb-item a,
  .breadcrumb-current {
    padding: 0.125rem 0.375rem;
  }
  
  .breadcrumb-current span {
    max-width: 150px;
  }
  
  .breadcrumb-icon {
    width: 14px;
    height: 14px;
  }
}

/* Print Styles */
@media print {
  .breadcrumbs {
    position: static;
    background: none;
    border: none;
    padding: 0.5rem 0;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .breadcrumb-item a {
    text-decoration: underline;
  }
  
  .breadcrumb-separator {
    opacity: 1;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .breadcrumb-item a {
    transition: none;
  }
}
</style>
